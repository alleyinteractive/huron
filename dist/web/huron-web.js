!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="../",t(t.s=2)}([function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),u=function(){function e(t,n){i(this,e),this._modules=t,this._moduleIds=Object.keys(t),this._config=null,this._sections=null,this._templates=null,this._prototypes=null,this._types=null,this.meta={},this.store=n,this.cycleModules(),this.cycleStyleguide()}return s(e,[{key:"cycleModules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={},r=t;r||(this.regenCache(),r=[].concat(o(document.querySelectorAll("[data-huron-id][data-huron-type]")))),i=this.getModuleListFromTags(r),Object.keys(i).forEach(function(t){var o=e._modules[t],r=i[t];e.loadModule(t,o,r,!0,n)})}},{key:"cycleSections",value:function(){this.cycleModules(!1,{property:"type",values:["section"],include:!0})}},{key:"cycleStyleguide",value:function(){var e=document.querySelector("[huron-sections]"),t=document.querySelector("[huron-menu]");if(e&&(e.innerHTML="",this.outputSections(null,e),this.cycleSections()),t){if(t.innerHTML="",null===document.querySelector(".section-menu__expand")){var n=document.createElement("button");n.classList.add("section-menu__expand"),n.innerHTML="Sections Menu",document.body.insertBefore(t.appendChild(n),document.body.childNodes[0]),n.addEventListener("click",function(){document.body.classList.toggle("section-menu-open")})}this.outputMenu(null,t)}}},{key:"getMetaFromPath",value:function(t,n){var o=this,i=this._sections.sectionsByPath,r=this._types.filter(function(e){return"prototype"!==e}),s=!1,a=!1;if(-1!==t.indexOf("./prototypes")){var u=Object.keys(this._prototypes).filter(function(e){return o._prototypes[e]===t});u.length&&(s=u[0],a="prototype")}else if(t===this._sectionTemplatePath)s="sections-template",a="sections-template";else{var l=[],c=Object.keys(i).filter(function(e){var n=r.filter(function(n){return i[e][n+"Path"]===t});return!!n.length&&(l=n,!0)});c&&c.length&&l&&l.length&&(s=i[c[0]].referenceURI,a=l[0])}if(s&&a){var d="data"===a?this._templates[t]:t,h=this.getModuleRender(a,t,n),p=e.generateModuleHash(d);if(h)return Object.assign({id:s,type:a,key:t,hash:p,module:n},h)}return console.warn("Module '"+t+"' does not exist on the page\n      or is no longer in use"),!1}},{key:"getModuleKeyFromTag",value:function(t){var n=e.getDataAttribute(t,"huron-type"),o=e.getDataAttribute(t,"huron-id"),i=this._sections.sectionsByURI[o];if(o&&n){if(i)return i[n+"Path"];if("prototype"===n)return this._prototypes[o]}return!1}},{key:"getModuleListFromTags",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={},r={};return e&&e.length&&e.forEach(function(e){var s=t.getModuleKeyFromTag(e);s?(i[s]||(i[s]=[]),i[s].push(e)):n&&(r=t.getModuleListFromTags([].concat(o(e.querySelectorAll("[data-huron-id][data-huron-type]"))),!1),Object.keys(r).forEach(function(e){i[e]=i[e]?i[e].concat(r[e]):r[e]}))}),i}},{key:"getModuleRender",value:function(e,t,n){var o=!1,i=!1;return"template"===e&&"function"==typeof n?(o=n,i=this._modules[this._templates[t]]):"sections-template"===e&&"function"==typeof n?o=n:"section"===e&&"object"===("undefined"==typeof n?"undefined":r(n))?(o=this._modules[this._sectionTemplatePath],i=n):"template"!==e&&"description"!==e&&"prototype"!==e||"string"!=typeof n?"data"===e&&"object"===("undefined"==typeof n?"undefined":r(n))&&(o=this._modules[this._templates[t]],i=n):o=function(){return n},!!o&&{render:o,data:i}}},{key:"loadModule",value:function(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=!0,a=!1;a=i?this.meta[t]:this.meta[t]=this.getMetaFromPath(t,n),a&&(r&&(s=e.filterModules(r,a)),s&&this.replaceTemplate(a,o))}},{key:"outputMenu",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._sections.sorted,i=null,r=t;Object.keys(o).forEach(function(t){var s=Object.keys(o[t]).length,a=void 0,u=void 0;if(i=e?e+"-"+t:t,r){var l=n._sections.sectionsByURI[i]?n._sections.sectionsByURI[i].header:i,c=document.createElement("ul"),d=document.createElement("li"),h='<a href="#styleguide-section-'+i+'">'+l+"</a>";c.classList.add("section-menu"),d.classList.add("section-menu__item"),d.innerHTML=h,"UL"!==r.tagName&&(a=c.cloneNode(),r.appendChild(a),r=a),s&&(u=c.cloneNode(),u.classList.add("section-menu--submenu"),d.classList.add("section-menu__item--has-submenu"),d.appendChild(u)),r.appendChild(d),s&&n.outputMenu(i,u,o[t])}})}},{key:"outputSections",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._sections.sorted,i=null,r=null;Object.keys(o).forEach(function(s){var a=!1,u=null,l=null,c=t;e?i=e+"-"+s:(i=s,a=!0),t&&(r=document.createElement("div"),r.dataset.huronId=i,r.dataset.huronType="section",a?(u=document.createElement("div"),u.classList.add("section--top-level__wrapper"),l=document.createElement("div"),l.classList.add("section","section--top-level"),l.appendChild(r),u.appendChild(l),t.appendChild(u),c=u):t.appendChild(r)),Object.keys(o[s]).length&&r&&n.outputSections(i,c,o[s])})}},{key:"regenCache",value:function(){var e=this;Object.keys(this._modules).forEach(function(t){e.meta[t]=e.getMetaFromPath(t,e._modules[t])})}},{key:"removeOldTags",value:function(t,n){if(n){var o=e.getDataAttribute(n,"parent-hash"),i=e.getDataAttribute(n,"self-hash");if(o===t&&i!==t){var r=i,s=n.previousSibling;r&&(this.removeOldTags(r,s),s=n.previousSibling),n.parentNode.removeChild(n),this.removeOldTags(t,s)}}}},{key:"replaceTemplate",value:function(t,n){var i=this,r=this.validateType(t.type),s=[],a=n,u=!1;a||(a=document.querySelectorAll("[data-huron-id][data-huron-type]")),r?(a.forEach(function(n){var o=e.getDataAttribute(n,"huron-type"),i=e.getDataAttribute(n,"huron-id");i===t.id&&o===r&&s.push(n)}),s&&s.length&&t.render&&s.forEach(function(n){var r=n,s=e.getDataAttribute(r,"huron-modifier"),a=r.parentNode,l=e.applyModifier(s,t),c=e.convertToElement(l).querySelector("template"),d=null;i.removeOldTags(t.hash,r.previousSibling),d=[].concat(o(c.content.children)),d.forEach(function(n){var o=n;1===o.nodeType&&(o.dataset.parentHash=t.hash,u=u?u:e.isSectionHelper(o,t),a.insertBefore(o,r))}),r.dataset.selfHash=t.hash,r.style.display="none",i.cycleModules(d,{property:"key",values:[t.key,i._sectionTemplatePath],include:!1}),u&&i.cycleStyleguide()})):console.warn("Could not render module\n        section: "+t.id+"\n        type: "+t.type)}},{key:"validateType",value:function(e){return"data"===e?"template":!!this._types.includes(e)&&e}},{key:"modules",set:function(e){this._modules=e,this._moduleIds=Object.keys(e)}},{key:"store",set:function(e){this._store=e,this._config=e.config,this._sections=e.sections,this._templates=e.templates,this._prototypes=e.prototypes,this._types=e.types,this._sectionTemplatePath=e.sectionTemplatePath}}],[{key:"applyModifier",value:function(e,t){var n=!1,o=t.data;return o?(e&&t.data[e]&&(o=Object.assign({},t.data[e],{modifier:e})),n=t.render(o)):n=t.render(),n}},{key:"convertToElement",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}},{key:"filterModules",value:function(e,t){var n=!0;return"object"===("undefined"==typeof e?"undefined":r(e))&&{}.hasOwnProperty.call(e,"property")&&{}.hasOwnProperty.call(e,"values")&&{}.hasOwnProperty.call(e,"include")?(n=e.values.filter(function(n){return t[e.property]===n}),Boolean(n.length)===e.include):(console.log(" // eslint-disable-line no-console\n      filter "+e+" is not in a valid format.\n      module filters must include 'property', 'values', and 'include' properties\n    "),n)}},{key:"generateModuleHash",value:function(e){return a(e)}},{key:"getDataAttribute",value:function(e,t){var n=!1;return e.dataset&&(n=e.dataset[t]),!n&&e.getAttribute&&(n=e.getAttribute("data-"+t)),n}},{key:"isSectionHelper",value:function(e,t){return"prototype"===t.type&&(e.hasAttribute("huron-sections")||e.hasAttribute("huron-menu"))}}]),e}();new u(modules,store)},function(e,t){e.exports=require("js-md5")},function(e,t,n){e.exports=n(0)}]);
//# sourceMappingURL=huron-web.js.map